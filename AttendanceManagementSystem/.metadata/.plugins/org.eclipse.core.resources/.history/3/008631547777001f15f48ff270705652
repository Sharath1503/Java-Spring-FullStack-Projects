package com.ex.controller;

import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestParam;

import com.ex.StudentEntity;
import com.ex.DAO.AttendedstudentsDAO;
import com.ex.DAO.StudentDAO;

@Controller
@RequestMapping("/students")
public class StudentController {
	
	@Autowired
	StudentDAO dao;
	
	@Autowired
	AttendedstudentsDAO dao1;
	
	@GetMapping("/bscstudents")
	public String DisplayBsc(Model m) {
		List <StudentEntity> students = dao.DisplayBSCstudents();
		System.out.println(students);
		m.addAttribute("bscstudentslist",students);
		return "bscstudents";
	}
	
	@GetMapping("/bcastudents")
	public String DisplayBa(Model m) {
		List <StudentEntity> students = dao.DisplayBCAstudents();
		m.addAttribute("bcastudentslist",students);
		return "bcastudents";
	}
	
	@GetMapping("/bcomstudents")
	public String DisplayBcom(Model m) {
		List <StudentEntity> students = dao.DisplayBCOMstudents();
		m.addAttribute("bcomstudentslist",students);
		return "bcomstudents";
	}
	
	@PostMapping("/attendanceforbca")
	public String bcaAttendance(@RequestParam("sid") Integer[] studentids){
		int i = studentids.length;
		dao1.Attendancesave("BCA",i);
		return "redirect:/";
	}
	
	@PostMapping("/attendanceforbsc")
	public String bscAttendance(@RequestParam("sid") Integer[] studentids){
		int i = studentids.length;
		dao1.Attendancesave("BSC",i);
		return "redirect:/";
	}
	
	

}
